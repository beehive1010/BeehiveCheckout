1) Matrix Structure (Global 1×3)

Every member is the root of their own 1×3 sub-tree.

Downlines are filled in order Left → Middle → Right (L → M → R).

Each layer has a capacity of 3^d (Layer 1 = 3, Layer 2 = 9, Layer 3 = 27 … Layer 19 = 3^19).

Placement follows global spillover rules: new members slide into the next available slot in the tree (either direct referrals or spillover from uplines).

2) Membership Levels & Upgrades

NFT Price progression:

Level 1 = 100 USDT,

Each higher level adds +50 USDT,

Level 19 = 1000 USDT.

Reward = NFT Price × 100% (unless overridden by admin config).

Upgrade condition: Members must upgrade sequentially (must own Level N before buying Level N+1).

Upgrades are not dependent on team size; they only depend on NFT purchase.

3) Reward Triggering

When a member upgrades to Level N, the system checks their Nth upline layer (depth = N).

The reward for Level N goes to the Nth layer upline (the ancestor N steps above the upgrading member).

Example:

If a member’s Layer 1 downline upgrades to Level 1 → Root gets 100 USDT.

If a member’s Layer 2 downline upgrades to Level 2 → Root gets 150 USDT.

… If a Layer 19 downline upgrades to Level 19 → Root gets 1000 USDT.

4) Eligibility & Pending Rewards

To receive a reward, the upline must have membership_level ≥ N.

If eligible → reward is confirmed immediately.

If not eligible → reward is created as pending, with 72 hours countdown (admin configurable).

If upline upgrades to Level ≥ N within 72h → pending becomes confirmed.

If not → reward expires and is reallocated upward.

5) Spillover / Reallocation

If the target upline fails to qualify after 72h, the system searches upward until it finds an upline with membership_level ≥ N.

The first qualified ancestor receives the reward.

If no one qualifies up to the top → reward goes to the platform account (or another fallback defined in admin settings).

6) Special Platform Revenue

Only Level 1 upgrades generate +30 USDT for platform revenue (logged in platform_revenue).

Levels 2–19 default to 0 platform fee (configurable).

7) Data Flow
On Upgrade

Insert into user_rewards:

member_wallet (the upgrading user),

beneficiary_wallet (target upline),

trigger_level = N,

amount_usdt,

status = confirmed | pending,

unlock_condition (e.g. "upgrade_to_level_N"),

expires_at (if pending, now +72h).

Insert into platform_revenue if N = 1 (+30 USDT).

On Cron (~15 min)

For all pending rows where expires_at <= now:

If beneficiary’s membership_level ≥ N → set status=confirmed.

Else → status=expired and reallocate upward to next eligible ancestor.

8) Summary

Global 1×3 placement ensures every member builds a tree of downlines.

Level N reward always goes to the Nth ancestor, but requires upline level ≥ N.

Unqualified uplines get 72h pending → must upgrade or reward is reallocated upward.

Platform revenue = +30 USDT for Level 1 upgrades only.

Max reward: Level 19 = 1000 USDT to the 19th ancestor if qualified.