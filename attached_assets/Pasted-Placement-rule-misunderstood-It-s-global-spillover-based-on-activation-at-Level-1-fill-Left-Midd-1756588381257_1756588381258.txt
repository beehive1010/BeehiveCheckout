Placement rule misunderstood: It’s global spillover based on activation at Level 1; fill Left → Middle → Right strictly, always lowest available layer first.
• Reward base misunderstood: Rewards are not global; they are computed per user as ROOTover their own Layers 1–19.
• Level-1 reward amount wrong: Level-1 reward is 100 USDT per slot on Root’s Layer-1 (L, M, R) → up to 300 USDT total for the root’s Layer-1.
• Special unlock missed/misapplied: Only the third Layer-1 reward (Right) is pending until the root upgrades to Level 2; other layers follow their own level eligibility.
• Platform fee: Only Level-1 purchases incur +30 USDT platform revenue.
• “$70 rewards” is incorrect for L1; should be $100 each.
Authoritative spec (final)
• Matrix (global 1×3): Only activated Level-1 members enter the matrix. Global spillover fills L → M → R, layer by layer (fill Layer-1 before Layer-2, etc.). Downlines may be direct referrals or spillover.
• Levels & pricing: L1=100, then +50 per level, up to L19=1000. Reward = 100% of NFT price(unless admin override).
• Reward trigger (per-root): When a member in your Layer N upgrades to Level N, you (as root) get Level-N reward.
• Layer-1 → Level-1: Root gets 100 USDT for each of L, M, R (max 300 USDT).
• Layer-1 Right slot reward is pending until root is Level 2; others are immediate if eligible.
• General eligibility: To receive Layer N reward, root must have membership_level ≥ N. If not, create pending (72h) → if still unqualified, reallocate upward to first ancestor with level ≥ N; if none, platform (per admin setting).
• Platform revenue: Only L1 purchases generate +30 USDT platform fee (recorded once per L1 purchase event).
• Matrix vs Reward: Placement is global by activation; rewards are per-root, tied to that root’s own Layers 1–19.
Data / API adjustments to make
• Placement service: Enforce global L→M→R spillover, layer-first filling for activated L1 entries.
• Reward service:
• Resolve root for the upgrading member.
• Determine depth N from root; check root.level ≥ N.
• Create confirmed or pending(72h) reward accordingly.
• Only for Layer-1 Right: pending until root reaches L2 (not a time-based pending unless you also want countdown; your rule is level-gate).
• Reallocation job: on pending expiry (or on level-gate fail if you keep timeboxes), walk up ancestors to find first qualified.
• Platform revenue: Add only for L1 events.
Frontend notes
• Your Matrix page should display your own tree (you as root) and highlight Layer-based rewards (L1 totals can reach 300).
• Pending badge on Layer-1 Right if root < L2; tooltips explain unlock rule.
• Countdown timers only if you keep a 72h window; otherwise show “requires Level 2” gate for the L1-Right case.
Acceptance tests (must pass)
1. Placement: Activate multiple Level-1 users; verify they fill L → M → R, Layer-1 fully before Layer-2.
2. L1 rewards: When three Layer-1 members buy Level-1, root receives 100 + 100 + 100; the third (Right) is pending until root upgrades to Level-2.
3. Layer-N eligibility: If root is < N, reward is pending (or reallocated after 72h if timebox is enabled).
4. Reallocation: After pending expiry, reward is reassigned to first ancestor with level ≥ N; if none, platform.
5. Platform fee: +30 USDT recorded only when someone buys Level-1.