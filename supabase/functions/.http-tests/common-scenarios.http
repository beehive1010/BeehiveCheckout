# å¸¸ç”¨ä¸šåŠ¡åœºæ™¯æµ‹è¯•
# Common Business Scenarios Testing

@baseUrl = https://cvqibjcbfrwsgkvthccp.supabase.co/functions/v1
@apiKey = YOUR_SUPABASE_ANON_KEY_HERE
@serviceKey = YOUR_SUPABASE_SERVICE_ROLE_KEY_HERE

### Test Data
@newMember = 0x4Cc359f21A99497CB78cb7902Ac44643Af41DD71
@referrer = 0x2C84e7DC65209730C067827b49AC7d5A1d25C8dC
@existingMember = 0x0B9b9F8c7b1f7c5b0a6b5b4b3b2b1b0b9b8b7b6b63

###############################################
# ğŸ¯ åœºæ™¯1: æ–°ä¼šå‘˜å®Œæ•´æ³¨å†Œæµç¨‹
# Scenario 1: Complete New Member Registration Flow
###############################################

### Step 1: æ£€æŸ¥æ¨èäººæ˜¯å¦å­˜åœ¨
GET {{baseUrl}}/member-management/info?wallet={{referrer}}
Authorization: Bearer {{apiKey}}

### Step 2: æ³¨å†Œæ–°ä¼šå‘˜
POST {{baseUrl}}/member-management/register
Authorization: Bearer {{serviceKey}}
Content-Type: application/json

{
  "wallet_address": "{{newMember}}",
  "referrer_wallet": "{{referrer}}",
  "email": "newmember@beehive.test",
  "username": "newuser001"
}

### Step 3: éªŒè¯æ³¨å†Œç»“æœ
GET {{baseUrl}}/member-management/info?wallet={{newMember}}
Authorization: Bearer {{apiKey}}

### Step 4: æ£€æŸ¥çŸ©é˜µå®‰ç½®çŠ¶æ€
GET {{baseUrl}}/matrix/status?wallet={{newMember}}
Authorization: Bearer {{apiKey}}

### Step 5: æŸ¥çœ‹æ¨èå…³ç³»
GET {{baseUrl}}/member-management/referrals?wallet={{referrer}}
Authorization: Bearer {{apiKey}}

###############################################
# ğŸ åœºæ™¯2: ä¼šå‘˜å‡çº§ä¸å¥–åŠ±å®Œæ•´æµç¨‹
# Scenario 2: Complete Member Upgrade & Reward Flow
###############################################

### Step 1: æ£€æŸ¥å‡çº§å‰çŠ¶æ€
GET {{baseUrl}}/member-management/level?wallet={{existingMember}}
Authorization: Bearer {{apiKey}}

### Step 2: å‡çº§ä¼šå‘˜åˆ°Level 1
POST {{baseUrl}}/member-management/upgrade-level
Authorization: Bearer {{serviceKey}}
Content-Type: application/json

{
  "wallet_address": "{{existingMember}}",
  "new_level": 1,
  "payment_confirmed": true
}

### Step 3: è§¦å‘å‡çº§å¥–åŠ±
POST {{baseUrl}}/upgrade-rewards/trigger
Authorization: Bearer {{serviceKey}}
Content-Type: application/json

{
  "upgraded_member": "{{existingMember}}",
  "new_level": 1
}

### Step 4: æ£€æŸ¥å¥–åŠ±çŠ¶æ€
GET {{baseUrl}}/upgrade-rewards/status?wallet_address={{existingMember}}
Authorization: Bearer {{apiKey}}

### Step 5: æŸ¥çœ‹æ´»è·ƒè®¡æ—¶å™¨
GET {{baseUrl}}/upgrade-rewards/timers
Authorization: Bearer {{apiKey}}

### Step 6: æ‰¹é‡æ£€æŸ¥å¾…å®šå¥–åŠ±
POST {{baseUrl}}/upgrade-rewards/batch-check
Authorization: Bearer {{serviceKey}}

###############################################
# ğŸ—ï¸ åœºæ™¯3: çŸ©é˜µç»“æ„åˆ†æä¸ç®¡ç†
# Scenario 3: Matrix Structure Analysis & Management
###############################################

### Step 1: æŸ¥çœ‹çŸ©é˜µæ ¹çš„å®Œæ•´ç»“æ„
GET {{baseUrl}}/matrix/tree?root={{referrer}}&layer=5
Authorization: Bearer {{apiKey}}

### Step 2: æ£€æŸ¥çŸ©é˜µå®ŒæˆçŠ¶æ€
GET {{baseUrl}}/matrix/completion?root={{referrer}}
Authorization: Bearer {{apiKey}}

### Step 3: æŸ¥æ‰¾ç©ºç¼ºä½ç½®
GET {{baseUrl}}/matrix/vacant?root={{referrer}}
Authorization: Bearer {{apiKey}}

### Step 4: è·å–çŸ©é˜µç»Ÿè®¡ä¿¡æ¯
GET {{baseUrl}}/matrix/stats?wallet={{referrer}}
Authorization: Bearer {{apiKey}}

### Step 5: éªŒè¯çŸ©é˜µç»“æ„å®Œæ•´æ€§
POST {{baseUrl}}/matrix/validate
Authorization: Bearer {{serviceKey}}
Content-Type: application/json

{
  "matrix_root": "{{referrer}}"
}

###############################################
# ğŸ’° åœºæ™¯4: å¥–åŠ±ç”³è¯·ä¸ç®¡ç†æµç¨‹
# Scenario 4: Reward Claiming & Management Flow
###############################################

### Step 1: æŸ¥çœ‹ç”¨æˆ·ä½™é¢
GET {{baseUrl}}/rewards/user
Authorization: Bearer {{apiKey}}
x-wallet-address: {{referrer}}

### Step 2: è·å–å¯ç”³è¯·å¥–åŠ±åˆ—è¡¨
GET {{baseUrl}}/rewards/claimable
Authorization: Bearer {{apiKey}}
x-wallet-address: {{referrer}}

### Step 3: æ£€æŸ¥å¾…å®šå¥–åŠ±
POST {{baseUrl}}/rewards/pending
Authorization: Bearer {{apiKey}}
Content-Type: application/json

{
  "wallet_address": "{{referrer}}"
}

### Step 4: æŸ¥çœ‹å¥–åŠ±é€šçŸ¥
POST {{baseUrl}}/rewards/notifications
Authorization: Bearer {{apiKey}}
Content-Type: application/json

{
  "wallet_address": "{{referrer}}",
  "is_read": false
}

### Step 5: è·å–å¥–åŠ±ä»ªè¡¨æ¿æ•°æ®
POST {{baseUrl}}/rewards/dashboard
Authorization: Bearer {{apiKey}}
Content-Type: application/json

{
  "wallet_address": "{{referrer}}"
}

###############################################
# ğŸ” åœºæ™¯5: ç”¨æˆ·è®¤è¯ä¸æƒé™éªŒè¯
# Scenario 5: User Authentication & Permission Verification
###############################################

### Step 1: é’±åŒ…è¿æ¥è®¤è¯
POST {{baseUrl}}/auth/connect
Content-Type: application/json

{
  "wallet_address": "{{existingMember}}",
  "signature": "0x1234567890abcdef",
  "message": "beehive_auth_2025"
}

### Step 2: æ£€æŸ¥ç”¨æˆ·çŠ¶æ€
GET {{baseUrl}}/auth/status?wallet={{existingMember}}
Authorization: Bearer {{apiKey}}

### Step 3: éªŒè¯ä¼šå‘˜æƒé™
POST {{baseUrl}}/auth/check-member
Authorization: Bearer {{apiKey}}
Content-Type: application/json

{
  "wallet_address": "{{existingMember}}",
  "required_level": 1
}

### Step 4: æ£€æŸ¥ç®¡ç†å‘˜æƒé™
POST {{baseUrl}}/auth/check-admin
Authorization: Bearer {{apiKey}}
Content-Type: application/json

{
  "wallet_address": "{{referrer}}"
}

### Step 5: è·å–ç”¨æˆ·ä¼šè¯ä¿¡æ¯
GET {{baseUrl}}/auth/session
Authorization: Bearer {{apiKey}}
x-wallet-address: {{existingMember}}

###############################################
# ğŸ“Š åœºæ™¯6: ç³»ç»Ÿç›‘æ§ä¸å¥åº·æ£€æŸ¥
# Scenario 6: System Monitoring & Health Checks
###############################################

### Step 1: å‡çº§å¥–åŠ±ç³»ç»Ÿç»Ÿè®¡
GET {{baseUrl}}/upgrade-rewards/status?wallet_address=system_stats
Authorization: Bearer {{apiKey}}

### Step 2: å¥–åŠ±ç³»ç»Ÿç»´æŠ¤
POST {{baseUrl}}/rewards/maintenance
Authorization: Bearer {{serviceKey}}

### Step 3: å¤„ç†è¿‡æœŸå¥–åŠ±
POST {{baseUrl}}/rewards/process-expired-rewards
Authorization: Bearer {{serviceKey}}

### Step 4: æ£€æŸ¥ç³»ç»Ÿæ´»è·ƒè®¡æ—¶å™¨
GET {{baseUrl}}/upgrade-rewards/timers
Authorization: Bearer {{apiKey}}

### Step 5: è·å–ä¼šå‘˜æ´»åŠ¨è®°å½•
GET {{baseUrl}}/member-management/activity?wallet={{existingMember}}&limit=10
Authorization: Bearer {{apiKey}}

###############################################
# ğŸ¯ åœºæ™¯7: Rä½ç½®è€ƒæ ¸å®Œæ•´æµç¨‹
# Scenario 7: Complete R Position Qualification Flow
###############################################

### Step 1: åˆ›å»ºéœ€è¦è€ƒæ ¸çš„Rä½ç½®å¥–åŠ±
POST {{baseUrl}}/upgrade-rewards/trigger
Authorization: Bearer {{serviceKey}}
Content-Type: application/json

{
  "upgraded_member": "{{existingMember}}",
  "new_level": 1
}

### Step 2: æŸ¥çœ‹åˆ›å»ºçš„è®¡æ—¶å™¨
GET {{baseUrl}}/upgrade-rewards/timers?wallet_address={{referrer}}
Authorization: Bearer {{apiKey}}

### Step 3: å‡çº§Rootåˆ°Level 2 (æ¨¡æ‹Ÿè€ƒæ ¸é€šè¿‡)
POST {{baseUrl}}/member-management/upgrade-level
Authorization: Bearer {{serviceKey}}
Content-Type: application/json

{
  "wallet_address": "{{referrer}}",
  "new_level": 2,
  "payment_confirmed": true
}

### Step 4: æ£€æŸ¥ç‰¹å®šè®¡æ—¶å™¨çš„è€ƒæ ¸çŠ¶æ€
POST {{baseUrl}}/upgrade-rewards/check-qualification
Authorization: Bearer {{serviceKey}}
Content-Type: application/json

{
  "timer_id": "replace-with-actual-timer-uuid"
}

### Step 5: éªŒè¯å¥–åŠ±å·²è¢«æ‰¹å‡†
GET {{baseUrl}}/upgrade-rewards/status?wallet_address={{existingMember}}
Authorization: Bearer {{apiKey}}

###############################################
# ğŸ”„ åœºæ™¯8: æ‰¹é‡æ•°æ®å¤„ç†ä¸åŒæ­¥
# Scenario 8: Batch Data Processing & Synchronization
###############################################

### Step 1: æ‰¹é‡æ£€æŸ¥æ‰€æœ‰å¾…å®šå¥–åŠ±
POST {{baseUrl}}/upgrade-rewards/batch-check
Authorization: Bearer {{serviceKey}}

### Step 2: æ‰¹é‡æ›´æ–°ä¼šå‘˜ä¿¡æ¯
POST {{baseUrl}}/member-management/batch-update
Authorization: Bearer {{serviceKey}}
Content-Type: application/json

{
  "operations": [
    {
      "wallet_address": "{{existingMember}}",
      "operation": "activate"
    }
  ]
}

### Step 3: æ‰¹é‡çŸ©é˜µæ“ä½œ
POST {{baseUrl}}/matrix/batch-update
Authorization: Bearer {{serviceKey}}
Content-Type: application/json

{
  "operations": [
    {
      "type": "validate",
      "matrix_root": "{{referrer}}"
    }
  ]
}

### Step 4: ç³»ç»ŸèŒƒå›´çš„æ•°æ®åŒæ­¥
POST {{baseUrl}}/admin/sync-data
Authorization: Bearer {{serviceKey}}
Content-Type: application/json

{
  "sync_types": ["rewards", "matrix", "members"]
}

###############################################
# âŒ åœºæ™¯9: é”™è¯¯å¤„ç†ä¸å¼‚å¸¸æ¢å¤
# Scenario 9: Error Handling & Exception Recovery
###############################################

### Step 1: æµ‹è¯•æ— æ•ˆé’±åŒ…åœ°å€
GET {{baseUrl}}/member-management/info?wallet=invalid_address
Authorization: Bearer {{apiKey}}

### Step 2: æµ‹è¯•ä¸å­˜åœ¨çš„ä¼šå‘˜
GET {{baseUrl}}/upgrade-rewards/status?wallet_address=0x0000000000000000000000000000000000000000
Authorization: Bearer {{apiKey}}

### Step 3: æµ‹è¯•æ— æ•ˆå¥–åŠ±ID
POST {{baseUrl}}/rewards/claim
Authorization: Bearer {{apiKey}}
Content-Type: application/json

{
  "claim_id": "00000000-0000-0000-0000-000000000000",
  "wallet_address": "{{existingMember}}"
}

### Step 4: æµ‹è¯•æƒé™ä¸è¶³
POST {{baseUrl}}/upgrade-rewards/trigger
Authorization: Bearer {{apiKey}}
Content-Type: application/json

{
  "upgraded_member": "{{existingMember}}",
  "new_level": 1
}

### Step 5: æµ‹è¯•æœåŠ¡ä¸å¯ç”¨åœºæ™¯
GET {{baseUrl}}/non-existent-endpoint
Authorization: Bearer {{apiKey}}

###############################################
# ğŸ“ˆ åœºæ™¯10: æ€§èƒ½ä¸å‹åŠ›æµ‹è¯•
# Scenario 10: Performance & Stress Testing
###############################################

### Step 1: å¹¶å‘æŸ¥è¯¢ç”¨æˆ·çŠ¶æ€
GET {{baseUrl}}/member-management/info?wallet={{existingMember}}
Authorization: Bearer {{apiKey}}

### Step 2: å¹¶å‘æŸ¥è¯¢å¥–åŠ±çŠ¶æ€
GET {{baseUrl}}/upgrade-rewards/status?wallet_address={{existingMember}}
Authorization: Bearer {{apiKey}}

### Step 3: å¹¶å‘æŸ¥è¯¢çŸ©é˜µçŠ¶æ€
GET {{baseUrl}}/matrix/status?wallet={{existingMember}}
Authorization: Bearer {{apiKey}}

### Step 4: å¤§æ•°æ®é‡æŸ¥è¯¢
GET {{baseUrl}}/matrix/tree?root={{referrer}}&layer=19
Authorization: Bearer {{apiKey}}

### Step 5: å¤æ‚è®¡ç®—æ“ä½œ
POST {{baseUrl}}/matrix/advanced-search
Authorization: Bearer {{apiKey}}
Content-Type: application/json

{
  "search_criteria": {
    "matrix_layer": [1, 2, 3, 4, 5],
    "is_active": true,
    "has_referrals": true
  },
  "limit": 1000
}