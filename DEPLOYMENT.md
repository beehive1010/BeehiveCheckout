# ğŸš€ Production Database Deployment Guide

## Overview
Your Beehive app is now configured with production database support. When deployed, it will automatically use the production PostgreSQL database provided by Replit.

## ğŸ—„ï¸ Database Configuration

### Environment Detection
The app automatically detects production vs development environments using:
- `REPLIT_DEPLOYMENT=1` (set by Replit in production)
- `NODE_ENV=production`

### Production Optimizations
- **Connection Pool**: 20 connections (vs 10 in dev)
- **SSL**: Enabled for secure connections
- **Logging**: Disabled for performance
- **Timeouts**: Optimized for production workloads

## ğŸ“‹ Deployment Steps

### 1. Deploy Your App
Use Replit's deployment feature - the database will automatically connect using environment variables.

### 2. Initialize Production Database
Run this command after deployment to set up the production schema:
```bash
node scripts/deploy-db.js
```

### 3. Verify Connection
The app will log the database connection status:
```
ğŸ—„ï¸ Database connecting to production environment
ğŸ”— Database URL: postgresql://***:***@[host]/[database]
```

## ğŸ” Environment Variables
These are automatically provided by Replit in production:
- `DATABASE_URL` - Full connection string
- `PGHOST` - Database host
- `PGUSER` - Database username  
- `PGPASSWORD` - Database password
- `PGDATABASE` - Database name
- `PGPORT` - Database port

## ğŸ› ï¸ Manual Database Operations

### Push Schema Changes
```bash
# Development
npm run db:push

# Production (force update)
npm run db:push --force
```

### Deploy Database Script
```bash
# Auto-detect environment
node scripts/deploy-db.js

# Force production mode
NODE_ENV=production node scripts/deploy-db.js
```

## âœ… Verification Checklist

- [x] Production database created âœ“
- [x] Environment-based configuration âœ“  
- [x] Connection pooling optimized âœ“
- [x] SSL enabled for production âœ“
- [x] Deployment script created âœ“
- [x] Graceful shutdown handling âœ“

## ğŸ”„ Migration Strategy
1. Test schema changes in development
2. Deploy application code
3. Run deployment script to sync production schema
4. Verify application functionality

## ğŸ“ Support
If you encounter database connection issues:
1. Check environment variables are set
2. Verify DATABASE_URL format
3. Run the deployment script manually
4. Contact Replit support for database issues

---
*Generated by Beehive Database Configuration*