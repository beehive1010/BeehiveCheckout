{
  "permissions": {
    "allow": [
      "Bash(tree:*)",
      "Bash(npm run dev:*)",
      "Bash(pkill:*)",
      "Bash(killall:*)",
      "Bash(npm run build:*)",
      "Bash(node:*)",
      "Bash(npx tsx:*)",
      "Bash(npm run:*)",
      "Bash(curl:*)",
      "Bash(tsx:*)",
      "Bash(grep:*)",
      "Bash(npx supabase:*)",
      "Bash(psql:*)",
      "Bash(tar:*)",
      "Bash(chmod:*)",
      "Bash(./supabase --version)",
      "Bash(rm:*)",
      "Bash(./supabase gen types typescript --project-id wykvpctrsqhebqpjmvdb --schema public)",
      "Bash(./supabase login)",
      "Bash(DEV_DB=$DATABASE_URL)",
      "Bash(__NEW_LINE__ echo \"=== PRODUCTION USERS ===\")",
      "Bash(__NEW_LINE__ echo \"=== DEVELOPMENT USERS ===\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"SELECT sponsor_wallet_address, member_wallet_address FROM referrals WHERE sponsor_wallet_address NOT LIKE ''0x%'' OR member_wallet_address NOT LIKE ''0x%'';\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"\\d referrals\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"SELECT root_wallet, member_wallet, placer_wallet, parent_wallet FROM referrals WHERE root_wallet NOT LIKE ''0x%'' OR member_wallet NOT LIKE ''0x%'' OR placer_wallet NOT LIKE ''0x%'' OR (parent_wallet IS NOT NULL AND parent_wallet NOT LIKE ''0x%'');\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"\n-- Update referrals table with real wallet addresses based on production data\n-- admin -> 0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0\n-- laurent153 -> 0xe6fb55d860c72f5e42056244410f5ea46895bfd8\n-- laurent1532 -> 0xb79d58df8ea073dd3904bc804df1e187a0ae4821\n-- admin123 (use for admin12345678) -> 0x6366573ff5f6b07be1e96b024c8862f5502d13e3\n-- admin12345 -> 0x2bc46f768384f88b3d3c53de6a69b3718026d23f\n-- laurent153889 -> 0xf9e54564d273531f97f95291baf0c3d74f337937\n-- Test001 (use for laurent153889test) -> 0x9b132b74a6246fa90e9c36e5cd845f1ded10c589\n\nUPDATE referrals SET \n  member_wallet = CASE \n    WHEN member_wallet = ''laurent153'' THEN ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8''\n    WHEN member_wallet = ''admin12345678'' THEN ''0x6366573ff5f6b07be1e96b024c8862f5502d13e3''\n    WHEN member_wallet = ''laurent153889'' THEN ''0xf9e54564d273531f97f95291baf0c3d74f337937''\n    WHEN member_wallet = ''laurent1532'' THEN ''0xb79d58df8ea073dd3904bc804df1e187a0ae4821''\n    WHEN member_wallet = ''admin12345'' THEN ''0x2bc46f768384f88b3d3c53de6a69b3718026d23f''\n    WHEN member_wallet = ''laurent153889test'' THEN ''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589''\n    ELSE member_wallet \n  END,\n  placer_wallet = CASE \n    WHEN placer_wallet = ''admin'' THEN ''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0''\n    WHEN placer_wallet = ''laurent153'' THEN ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8''\n    ELSE placer_wallet \n  END,\n  parent_wallet = CASE \n    WHEN parent_wallet = ''admin'' THEN ''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0''\n    WHEN parent_wallet = ''laurent153'' THEN ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8''\n    ELSE parent_wallet \n  END\nWHERE \n  member_wallet NOT LIKE ''0x%'' OR \n  placer_wallet NOT LIKE ''0x%'' OR \n  (parent_wallet IS NOT NULL AND parent_wallet NOT LIKE ''0x%'');\n\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"SELECT root_wallet, member_wallet, placer_wallet, parent_wallet, layer, position FROM referrals ORDER BY layer, position;\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"\n-- Create members table data for all 10 production users\nINSERT INTO members (wallet_address, bcc_membership_level, is_activated, activation_date, is_upgraded, current_level) VALUES \n(''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', 1, true, ''2025-09-04 03:50:37.690101'', false, 1),\n(''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', 1, true, ''2025-09-04 03:58:44.923684'', false, 1),\n(''0xb79d58df8ea073dd3904bc804df1e187a0ae4821'', 1, true, ''2025-09-04 04:36:15.461142'', false, 1),\n(''0x6366573ff5f6b07be1e96b024c8862f5502d13e3'', 1, true, ''2025-09-04 06:01:39.263693'', false, 1),\n(''0x2bc46f768384f88b3d3c53de6a69b3718026d23f'', 1, true, ''2025-09-04 06:52:27.618444'', false, 1),\n(''0xf9e54564d273531f97f95291baf0c3d74f337937'', 1, true, ''2025-09-04 07:58:30.933610'', false, 1),\n(''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', 1, true, ''2025-09-04 08:17:59.759522'', false, 1),\n(''0xabaa68278d23bd09bbf16ae7f715a96393cfdfa1'', 1, true, ''2025-09-04 09:39:15.236559'', false, 1),\n(''0xab02b5381694f8a39149b9d31459533c4e8a0016'', 1, true, ''2025-09-04 09:41:39.926621'', false, 1),\n(''0x0d1dccbab42d94f3caf4f34c19fa176f21e23188'', 1, true, ''2025-09-04 09:42:55.768005'', false, 1);\n\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"\n-- Insert production members data with correct column structure\nINSERT INTO members (wallet_address, is_activated, activated_at, current_level, max_layer, levels_owned, has_pending_rewards, upgrade_reminder_enabled, last_upgrade_at, last_reward_claim_at, total_direct_referrals, total_team_size, created_at, updated_at) VALUES \n(''0x0d1dccbab42d94f3caf4f34c19fa176f21e23188'', true, ''2025-09-04 09:43:02.592'', 1, 0, ''[1]'', false, false, null, null, 0, 0, ''2025-09-04 09:42:55.768005'', ''2025-09-04 09:43:02.801''),\n(''0x2bc46f768384f88b3d3c53de6a69b3718026d23f'', true, ''2025-09-04 07:23:51.845'', 1, 0, ''[1]'', false, false, null, null, 0, 0, ''2025-09-04 06:52:27.618444'', ''2025-09-04 07:23:52.061''),\n(''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', true, ''2025-09-04 06:06:32.428'', 1, 0, ''[1]'', false, false, null, null, 1, 0, ''2025-09-04 03:50:37.690101'', ''2025-09-04 08:17:59.759522''),\n(''0x6366573ff5f6b07be1e96b024c8862f5502d13e3'', false, null, 0, 0, ''[]'', false, false, null, null, 0, 0, ''2025-09-04 06:01:39.263693'', ''2025-09-04 06:01:39.263693''),\n(''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', true, ''2025-09-04 08:18:06.912'', 1, 0, ''[1]'', false, false, null, null, 1, 0, ''2025-09-04 08:17:59.759522'', ''2025-09-04 09:42:55.768005''),\n(''0xab02b5381694f8a39149b9d31459533c4e8a0016'', true, ''2025-09-04 09:41:44.75'', 1, 0, ''[1]'', false, false, null, null, 0, 0, ''2025-09-04 09:41:39.926621'', ''2025-09-04 09:41:44.958''),\n(''0xabaa68278d23bd09bbf16ae7f715a96393cfdfa1'', true, ''2025-09-04 09:39:20.587'', 1, 0, ''[1]'', false, false, null, null, 0, 0, ''2025-09-04 09:39:15.236559'', ''2025-09-04 09:39:20.802''),\n(''0xb79d58df8ea073dd3904bc804df1e187a0ae4821'', true, ''2025-09-04 04:36:23.789'', 1, 0, ''[1]'', false, false, null, null, 0, 0, ''2025-09-04 04:36:15.461142'', ''2025-09-04 04:36:23.997''),\n(''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', true, ''2025-09-04 03:58:50.128'', 1, 0, ''[1]'', false, false, null, null, 1, 0, ''2025-09-04 03:58:44.923684'', ''2025-09-04 07:58:30.93361''),\n(''0xf9e54564d273531f97f95291baf0c3d74f337937'', true, ''2025-09-04 07:58:36.814'', 1, 0, ''[1]'', false, false, null, null, 0, 0, ''2025-09-04 07:58:30.93361'', ''2025-09-04 07:58:37.023'');\n\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"\n-- Clear existing members table and insert fresh production data\nTRUNCATE TABLE members CASCADE;\n\nINSERT INTO members (wallet_address, is_activated, activated_at, current_level, max_layer, levels_owned, has_pending_rewards, upgrade_reminder_enabled, last_upgrade_at, last_reward_claim_at, total_direct_referrals, total_team_size, created_at, updated_at) VALUES \n(''0x0d1dccbab42d94f3caf4f34c19fa176f21e23188'', true, ''2025-09-04 09:43:02.592'', 1, 0, ''[1]'', false, false, null, null, 0, 0, ''2025-09-04 09:42:55.768005'', ''2025-09-04 09:43:02.801''),\n(''0x2bc46f768384f88b3d3c53de6a69b3718026d23f'', true, ''2025-09-04 07:23:51.845'', 1, 0, ''[1]'', false, false, null, null, 0, 0, ''2025-09-04 06:52:27.618444'', ''2025-09-04 07:23:52.061''),\n(''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', true, ''2025-09-04 06:06:32.428'', 1, 0, ''[1]'', false, false, null, null, 1, 0, ''2025-09-04 03:50:37.690101'', ''2025-09-04 08:17:59.759522''),\n(''0x6366573ff5f6b07be1e96b024c8862f5502d13e3'', false, null, 0, 0, ''[]'', false, false, null, null, 0, 0, ''2025-09-04 06:01:39.263693'', ''2025-09-04 06:01:39.263693''),\n(''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', true, ''2025-09-04 08:18:06.912'', 1, 0, ''[1]'', false, false, null, null, 1, 0, ''2025-09-04 08:17:59.759522'', ''2025-09-04 09:42:55.768005''),\n(''0xab02b5381694f8a39149b9d31459533c4e8a0016'', true, ''2025-09-04 09:41:44.75'', 1, 0, ''[1]'', false, false, null, null, 0, 0, ''2025-09-04 09:41:39.926621'', ''2025-09-04 09:41:44.958''),\n(''0xabaa68278d23bd09bbf16ae7f715a96393cfdfa1'', true, ''2025-09-04 09:39:20.587'', 1, 0, ''[1]'', false, false, null, null, 0, 0, ''2025-09-04 09:39:15.236559'', ''2025-09-04 09:39:20.802''),\n(''0xb79d58df8ea073dd3904bc804df1e187a0ae4821'', true, ''2025-09-04 04:36:23.789'', 1, 0, ''[1]'', false, false, null, null, 0, 0, ''2025-09-04 04:36:15.461142'', ''2025-09-04 04:36:23.997''),\n(''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', true, ''2025-09-04 03:58:50.128'', 1, 0, ''[1]'', false, false, null, null, 1, 0, ''2025-09-04 03:58:44.923684'', ''2025-09-04 07:58:30.93361''),\n(''0xf9e54564d273531f97f95291baf0c3d74f337937'', true, ''2025-09-04 07:58:36.814'', 1, 0, ''[1]'', false, false, null, null, 0, 0, ''2025-09-04 07:58:30.93361'', ''2025-09-04 07:58:37.023'');\n\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"\n-- Clear referrals and rebuild based on production referrer_wallet relationships\nTRUNCATE TABLE referrals CASCADE;\n\n-- Build referral matrix from the referrer_wallet relationships\n-- Layer 1: Direct referrals\nINSERT INTO referrals (root_wallet, member_wallet, layer, position, parent_wallet, placer_wallet, placement_type, is_active) VALUES \n-- Admin''s direct referrals\n(''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', 1, ''L'', ''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', ''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', ''direct'', true),\n(''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', ''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', 1, ''M'', ''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', ''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', ''direct'', true),\n\n-- Laurent153''s direct referrals\n(''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''0x2bc46f768384f88b3d3c53de6a69b3718026d23f'', 1, ''L'', ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''direct'', true),\n(''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''0xb79d58df8ea073dd3904bc804df1e187a0ae4821'', 1, ''M'', ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''direct'', true),\n(''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''0xf9e54564d273531f97f95291baf0c3d74f337937'', 1, ''R'', ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''direct'', true),\n\n-- Test001''s direct referrals  \n(''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''0xabaa68278d23bd09bbf16ae7f715a96393cfdfa1'', 1, ''L'', ''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''direct'', true),\n(''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''0xab02b5381694f8a39149b9d31459533c4e8a0016'', 1, ''M'', ''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''direct'', true),\n(''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''0x0d1dccbab42d94f3caf4f34c19fa176f21e23188'', 1, ''R'', ''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''direct'', true);\n\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"\n-- Add Layer 2 cascading relationships\n-- Laurent153''s team appears in Admin''s Layer 2\nINSERT INTO referrals (root_wallet, member_wallet, layer, position, parent_wallet, placer_wallet, placement_type, is_active) VALUES \n(''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', ''0x2bc46f768384f88b3d3c53de6a69b3718026d23f'', 2, ''L-L'', ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''spillover'', true),\n(''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', ''0xb79d58df8ea073dd3904bc804df1e187a0ae4821'', 2, ''L-M'', ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''spillover'', true),\n(''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', ''0xf9e54564d273531f97f95291baf0c3d74f337937'', 2, ''L-R'', ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', ''spillover'', true),\n\n-- Test001''s team appears in Admin''s Layer 2  \n(''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', ''0xabaa68278d23bd09bbf16ae7f715a96393cfdfa1'', 2, ''M-L'', ''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''spillover'', true),\n(''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', ''0xab02b5381694f8a39149b9d31459533c4e8a0016'', 2, ''M-M'', ''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''spillover'', true),\n(''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', ''0x0d1dccbab42d94f3caf4f34c19fa176f21e23188'', 2, ''M-R'', ''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', ''spillover'', true);\n\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"\n-- Clear and recreate user_balances with real production users\nTRUNCATE TABLE user_balances;\n\n-- Create BCC balances for activated users (500 initial + 100 from Level 1 = 600 transferable, 10,350 locked)\nINSERT INTO user_balances (wallet_address, bcc_transferable, bcc_locked, total_usdt_earned, pending_upgrade_rewards, rewards_claimed) VALUES \n-- Activated users get 600 transferable + 10,350 locked BCC\n(''0x380fd6a57fc2df6f10b8920002e4acc7d57d61c0'', 600, 10350, 200.00, 100.00, 0.00),\n(''0xe6fb55d860c72f5e42056244410f5ea46895bfd8'', 600, 10350, 200.00, 0.00, 0.00), \n(''0xb79d58df8ea073dd3904bc804df1e187a0ae4821'', 600, 10350, 100.00, 0.00, 0.00),\n(''0x2bc46f768384f88b3d3c53de6a69b3718026d23f'', 600, 10350, 100.00, 0.00, 0.00),\n(''0xf9e54564d273531f97f95291baf0c3d74f337937'', 600, 10350, 100.00, 0.00, 0.00),\n(''0x9b132b74a6246fa90e9c36e5cd845f1ded10c589'', 600, 10350, 150.00, 0.00, 0.00),\n(''0xabaa68278d23bd09bbf16ae7f715a96393cfdfa1'', 600, 10350, 50.00, 0.00, 0.00),\n(''0xab02b5381694f8a39149b9d31459533c4e8a0016'', 600, 10350, 50.00, 0.00, 0.00),\n(''0x0d1dccbab42d94f3caf4f34c19fa176f21e23188'', 600, 10350, 50.00, 0.00, 0.00),\n-- Non-activated user gets 500 initial BCC only\n(''0x6366573ff5f6b07be1e96b024c8862f5502d13e3'', 500, 0, 0.00, 0.00, 0.00);\n\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"\\d user_balances\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"\n-- Check which users should have root matrix entries\nSELECT ''Users who should have root matrices:'' as info;\nSELECT wallet_address, username FROM users ORDER BY created_at;\n\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"\n-- STEP 3: Add cascading for users with uplines\n-- Every referral cascades up through the entire upline chain\n\n-- Laurent153''s referrals also need to cascade to Laurent153''s upline (Admin) - ALREADY DONE ABOVE\n\n-- Test001''s referrals also need to cascade to Test001''s upline (Admin) - ALREADY DONE ABOVE\n\n-- Now add missing upline cascading for deeper levels\n-- laurent1532 is referred by Laurent153, so laurent1532''s future referrals should cascade to Laurent153 AND Admin\n-- admin12345 is referred by Laurent153, so admin12345''s future referrals should cascade to Laurent153 AND Admin  \n-- laurent153889 is referred by Laurent153, so laurent153889''s future referrals should cascade to Laurent153 AND Admin\n\n-- TestAA is referred by Test001, so TestAA''s future referrals should cascade to Test001 AND Admin\n-- TestBB is referred by Test001, so TestBB''s future referrals should cascade to Test001 AND Admin  \n-- TeatCC is referred by Test001, so TeatCC''s future referrals should cascade to Test001 AND Admin\n\n-- Since these users currently have NO referrals themselves, there are no cascading relationships to add yet.\n-- The cascading will be automatically added when they get referrals.\n\n-- Let''s verify the current complete structure:\nSELECT ''Current complete referral matrix:'' as status;\nSELECT root_wallet, COUNT(*) as total_referrals, \n       COUNT(CASE WHEN layer = 1 THEN 1 END) as layer1,\n       COUNT(CASE WHEN layer = 2 THEN 1 END) as layer2\nFROM referrals \nGROUP BY root_wallet \nORDER BY root_wallet;\n\")",
      "Bash(find:*)",
      "Bash(supabase:*)",
      "Bash(export SUPABASE_URL=https://cvqibjcbfrwsgkvthccp.supabase.co)",
      "Bash(export:*)",
      "Bash(./deploy-migrations.sh:*)",
      "Bash(npm install:*)",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"SELECT level, level_name FROM nft_levels ORDER BY level;\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"\\dt\")",
      "Bash(DEV_DB=$DATABASE_URL psql $DEV_DB -c \"SELECT * FROM level_config ORDER BY level;\")"
    ],
    "deny": [],
    "ask": []
  }
}