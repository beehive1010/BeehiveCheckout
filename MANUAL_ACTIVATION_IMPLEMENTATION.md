# æ‰‹åŠ¨æ¿€æ´»åŠŸèƒ½å®ç°æ€»ç»“

**æ—¥æœŸ**: 2025-10-14
**ç›®çš„**: è§£å†³ PayEmbed è´­ä¹°å NFT æœªèƒ½è‡ªåŠ¨æ¿€æ´»çš„é—®é¢˜

---

## ğŸ¯ é—®é¢˜æè¿°

ç”¨æˆ·æŠ¥å‘Šï¼š**é€šè¿‡ PayEmbed è´­ä¹° NFT åï¼Œä»æ¥æ²¡æœ‰æˆåŠŸ claim åˆ°ï¼ˆæ¿€æ´»ä¼šå‘˜ï¼‰**

### æ ¹æœ¬åŸå› åˆ†æ

PayEmbed è´­ä¹°æµç¨‹ä¸­å¯èƒ½çš„å¤±è´¥ç‚¹ï¼š
1. `onPurchaseSuccess` å›è°ƒæœªè¢«è§¦å‘
2. å›è°ƒè§¦å‘ä½† API è°ƒç”¨å¤±è´¥
3. ç½‘ç»œè¶…æ—¶å¯¼è‡´æ¿€æ´»å¤±è´¥
4. ç”¨æˆ·å…³é—­é¡µé¢è¿‡æ—©

---

## âœ… è§£å†³æ–¹æ¡ˆ

åˆ›å»ºäº†ä¸€ä¸ª**æ‰‹åŠ¨æ¿€æ´»é¡µé¢**ï¼Œå…è®¸ç”¨æˆ·åœ¨è´­ä¹° NFT åæ‰‹åŠ¨è§¦å‘ä¼šå‘˜æ¿€æ´»æµç¨‹ã€‚

### æ ¸å¿ƒåŠŸèƒ½

ç±»ä¼¼äº `WelcomeLevel1ClaimButton` çš„éªŒè¯æµç¨‹ï¼š
1. âœ… éªŒè¯ç”¨æˆ·æ³¨å†ŒçŠ¶æ€
2. âœ… æ£€æŸ¥ NFT é“¾ä¸Šæ‰€æœ‰æƒ
3. âœ… å¦‚æœæœªæ³¨å†Œï¼Œå¼¹å‡ºæ³¨å†Œè¡¨å•
4. âœ… ç‚¹å‡»æŒ‰é’®æ‰‹åŠ¨è§¦å‘æ¿€æ´»
5. âœ… è°ƒç”¨ `payembed-activation` Edge Function

---

## ğŸ“ æ–°å¢æ–‡ä»¶

### 1. ManualActivationButton.tsx

**è·¯å¾„**: `src/components/membership/claim/ManualActivationButton.tsx`

**åŠŸèƒ½**:
- å®æ—¶æ£€æŸ¥ç”¨æˆ·çŠ¶æ€ï¼ˆNFT æ‰€æœ‰æƒã€æ³¨å†Œã€æ¿€æ´»ï¼‰
- æ˜¾ç¤ºçŠ¶æ€æ¸…å•ï¼ˆâœ… / âŒ å›¾æ ‡ï¼‰
- ä¸€é”®æ¿€æ´»æŒ‰é’®
- æ³¨å†Œè¡¨å•é›†æˆ
- è¯¦ç»†é”™è¯¯å¤„ç†

**å…³é”®ä»£ç **:
```typescript
const checkStatus = async () => {
  // 1. æ£€æŸ¥ NFT æ‰€æœ‰æƒ
  const balance = await balanceOf({
    contract: nftContract,
    owner: account.address,
    tokenId: BigInt(level)
  });
  setHasNFT(Number(balance) > 0);

  // 2. æ£€æŸ¥ç”¨æˆ·æ³¨å†Œ
  const { data: userData } = await authService.getUser(account.address);
  setIsRegistered(!!userData);

  // 3. æ£€æŸ¥ä¼šå‘˜æ¿€æ´»
  const membershipResult = await authService.isActivatedMember(account.address);
  setIsActivated(membershipResult.isActivated);
};

const handleActivate = async () => {
  // è°ƒç”¨ payembed-activation API
  const response = await fetch(`${API_BASE}/payembed-activation`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${ANON_KEY}`,
      'apikey': `${ANON_KEY}`,
      'x-wallet-address': account.address,
    },
    body: JSON.stringify({ level, referrerWallet }),
  });
};
```

**UI ç‰¹æ€§**:
- ğŸ¨ æ¸å˜å¡ç‰‡è®¾è®¡
- âœ… å®æ—¶çŠ¶æ€æ˜¾ç¤º
- ğŸ”„ åŠ è½½çŠ¶æ€åŠ¨ç”»
- ğŸš¨ é”™è¯¯æç¤ºä¿¡æ¯
- ğŸ“‹ æ³¨å†Œè¡¨å•é›†æˆ

### 2. ActivateMembership.tsx

**è·¯å¾„**: `src/pages/ActivateMembership.tsx`

**åŠŸèƒ½**:
- å®Œæ•´çš„æ¿€æ´»é¡µé¢
- FAQ éƒ¨åˆ†
- æ•…éšœæ’æŸ¥æŒ‡å—
- å¸®åŠ©ä¿¡æ¯

**URL**: `/activate-membership?level=1`

**é¡µé¢ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header (è¿”å›æŒ‰é’®)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ ‡é¢˜å’Œè¯´æ˜                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ManualActivationButton          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ çŠ¶æ€æ¸…å•                   â”‚   â”‚
â”‚ â”‚ âœ… Own NFT                â”‚   â”‚
â”‚ â”‚ âœ… User Registration      â”‚   â”‚
â”‚ â”‚ âŒ Membership Activated   â”‚   â”‚
â”‚ â”‚                           â”‚   â”‚
â”‚ â”‚ [Activate Button]         â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ FAQ Section                     â”‚
â”‚ - ä¸ºä»€ä¹ˆéœ€è¦æ‰‹åŠ¨æ¿€æ´»ï¼Ÿ           â”‚
â”‚ - æ¿€æ´»è¿‡ç¨‹ä¸­å‘ç”Ÿä»€ä¹ˆï¼Ÿ           â”‚
â”‚ - å¦‚æœçœ‹ä¸åˆ° NFT æ€ä¹ˆåŠï¼Ÿ        â”‚
â”‚ - æ¿€æ´»å¤±è´¥æ€ä¹ˆåŠï¼Ÿ               â”‚
â”‚ - éœ€è¦å¸®åŠ©ï¼Ÿ                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. è·¯ç”±æ›´æ–°

**æ–‡ä»¶**: `src/App.tsx`

**æ·»åŠ çš„è·¯ç”±**:
```typescript
import ActivateMembership from "@/pages/ActivateMembership";

<Route path="/activate-membership" component={ActivateMembership} />
```

---

## ğŸ”„ å®Œæ•´æ¿€æ´»æµç¨‹

### è‡ªåŠ¨æ¿€æ´»æµç¨‹ï¼ˆPayEmbedï¼‰

```
ç”¨æˆ·è´­ä¹° NFT
    â†“
PayEmbed æˆåŠŸ
    â†“
onPurchaseSuccess è§¦å‘
    â†“
è°ƒç”¨ payembed-activation API
    â†“
[å¯èƒ½å¤±è´¥ç‚¹]
    â†“
æ¿€æ´»æˆåŠŸ â†’ Dashboard
```

### æ‰‹åŠ¨æ¿€æ´»æµç¨‹ï¼ˆæ–°åŠŸèƒ½ï¼‰

```
ç”¨æˆ·è®¿é—® /activate-membership
    â†“
è¿æ¥é’±åŒ…
    â†“
æ£€æŸ¥çŠ¶æ€:
  - NFT æ‰€æœ‰æƒ âœ…
  - ç”¨æˆ·æ³¨å†Œ âœ…
  - ä¼šå‘˜æ¿€æ´» âŒ
    â†“
ç‚¹å‡» "Activate" æŒ‰é’®
    â†“
è°ƒç”¨ payembed-activation API
    â†“
æ¿€æ´»æˆåŠŸ â†’ Dashboard
```

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: PayEmbed è‡ªåŠ¨æ¿€æ´»å¤±è´¥
**é—®é¢˜**: ç”¨æˆ·è´­ä¹°æˆåŠŸä½†æ²¡æœ‰æ¿€æ´»ä¼šå‘˜

**è§£å†³**:
1. å¼•å¯¼ç”¨æˆ·è®¿é—® `/activate-membership`
2. ç”¨æˆ·è¿æ¥é’±åŒ…
3. ç³»ç»Ÿæ£€æµ‹åˆ° NFT ä½†æœªæ¿€æ´»
4. ç‚¹å‡»æŒ‰é’®æ‰‹åŠ¨æ¿€æ´»

### åœºæ™¯ 2: ç”¨æˆ·æœªæ³¨å†Œå°±è´­ä¹°äº† NFT
**é—®é¢˜**: ç›´æ¥è´­ä¹°ä½†è·³è¿‡äº†æ³¨å†Œæ­¥éª¤

**è§£å†³**:
1. ç”¨æˆ·è®¿é—® `/activate-membership`
2. ç³»ç»Ÿæ£€æµ‹åˆ° NFT ä½†ç”¨æˆ·æœªæ³¨å†Œ
3. è‡ªåŠ¨å¼¹å‡ºæ³¨å†Œè¡¨å•
4. æ³¨å†Œå®Œæˆåæ¿€æ´»ä¼šå‘˜

### åœºæ™¯ 3: ç½‘ç»œé—®é¢˜å¯¼è‡´æ¿€æ´»è¶…æ—¶
**é—®é¢˜**: è´­ä¹°æ—¶ç½‘ç»œä¸ç¨³å®šï¼Œæ¿€æ´»å¤±è´¥

**è§£å†³**:
1. ç”¨æˆ·ç¨åè®¿é—® `/activate-membership`
2. NFT å·²ç¡®è®¤ï¼Œç‚¹å‡»æ¿€æ´»
3. æˆåŠŸæ¿€æ´»

---

## ğŸ“Š çŠ¶æ€æ£€æŸ¥é€»è¾‘

### ä¸‰ä¸ªå…³é”®çŠ¶æ€

| çŠ¶æ€ | æ£€æŸ¥æ–¹å¼ | å›¾æ ‡ |
|-----|---------|-----|
| **NFT æ‰€æœ‰æƒ** | `balanceOf(account, tokenId)` | âœ… / âŒ |
| **ç”¨æˆ·æ³¨å†Œ** | `authService.getUser(address)` | âœ… / âš ï¸ |
| **ä¼šå‘˜æ¿€æ´»** | `authService.isActivatedMember(address)` | âœ… / â³ |

### çŠ¶æ€ç»„åˆä¸è¡Œä¸º

| NFT | æ³¨å†Œ | æ¿€æ´» | æ˜¾ç¤º |
|-----|-----|-----|------|
| âŒ | âŒ | âŒ | "è¯·å…ˆè´­ä¹° NFT" |
| âœ… | âŒ | âŒ | "è¯·å…ˆæ³¨å†Œ" â†’ å¼¹å‡ºæ³¨å†Œè¡¨å• |
| âœ… | âœ… | âŒ | "ç‚¹å‡»æ¿€æ´»" â†’ æ¿€æ´»æŒ‰é’® |
| âœ… | âœ… | âœ… | "å·²æ¿€æ´»" â†’ ç»¿è‰²æç¤º |

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. å®æ—¶çŠ¶æ€æ£€æŸ¥

```typescript
useEffect(() => {
  if (account?.address) {
    checkStatus();
  }
}, [account?.address, level]);
```

æ¯æ¬¡é’±åŒ…åœ°å€æˆ–ç­‰çº§å˜åŒ–æ—¶è‡ªåŠ¨æ£€æŸ¥çŠ¶æ€ã€‚

### 2. æ³¨å†Œè¡¨å•é›†æˆ

```typescript
const handleRegistrationComplete = () => {
  setShowRegistrationModal(false);
  setIsRegistered(true);
  setTimeout(() => {
    checkStatus();
  }, 1000);
};
```

æ³¨å†Œå®Œæˆåè‡ªåŠ¨é‡æ–°æ£€æŸ¥çŠ¶æ€ã€‚

### 3. API è°ƒç”¨

```typescript
const response = await fetch(`${API_BASE}/payembed-activation`, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${ANON_KEY}`,
    'apikey': `${ANON_KEY}`,
    'x-wallet-address': account.address,
  },
  body: JSON.stringify({
    level,
    referrerWallet: userData.referrer_wallet,
  }),
});
```

ä½¿ç”¨ä¸ PayEmbed ç›¸åŒçš„ API endpointï¼Œç¡®ä¿ä¸€è‡´æ€§ã€‚

### 4. é”™è¯¯å¤„ç†

```typescript
if (errorJson.error === 'NFT_NOT_FOUND') {
  toast({
    title: 'NFT Not Found',
    description: 'Please wait 1-2 minutes for transaction confirmation.',
    variant: 'destructive',
    duration: 10000
  });
} else if (errorJson.error === 'USER_NOT_REGISTERED') {
  setShowRegistrationModal(true);
}
```

é’ˆå¯¹ä¸åŒé”™è¯¯ç±»å‹æä¾›å…·ä½“çš„è§£å†³æ–¹æ¡ˆã€‚

---

## ğŸš€ éƒ¨ç½²å’Œæµ‹è¯•

### éƒ¨ç½²æ­¥éª¤

1. âœ… æ–‡ä»¶å·²åˆ›å»º:
   - `ManualActivationButton.tsx`
   - `ActivateMembership.tsx`

2. âœ… è·¯ç”±å·²æ·»åŠ :
   - `/activate-membership`

3. â³ å¾…éƒ¨ç½²:
   - Push åˆ° Git
   - Vercel è‡ªåŠ¨éƒ¨ç½²

### æµ‹è¯•åœºæ™¯

#### æµ‹è¯• 1: æ­£å¸¸æ¿€æ´»æµç¨‹
```
1. ä½¿ç”¨æ‹¥æœ‰ NFT çš„é’±åŒ…è¿æ¥
2. ç¡®è®¤ç”¨æˆ·å·²æ³¨å†Œ
3. è®¿é—® /activate-membership?level=1
4. ç‚¹å‡» "Activate" æŒ‰é’®
5. éªŒè¯æˆåŠŸæ¿€æ´»å¹¶è·³è½¬åˆ° Dashboard
```

#### æµ‹è¯• 2: æœªæ³¨å†Œç”¨æˆ·
```
1. ä½¿ç”¨æ‹¥æœ‰ NFT ä½†æœªæ³¨å†Œçš„é’±åŒ…
2. è®¿é—® /activate-membership?level=1
3. åº”è¯¥è‡ªåŠ¨å¼¹å‡ºæ³¨å†Œè¡¨å•
4. å®Œæˆæ³¨å†Œ
5. ç‚¹å‡» "Activate" æŒ‰é’®
6. éªŒè¯æˆåŠŸæ¿€æ´»
```

#### æµ‹è¯• 3: æ—  NFT ç”¨æˆ·
```
1. ä½¿ç”¨æ²¡æœ‰ NFT çš„é’±åŒ…
2. è®¿é—® /activate-membership?level=1
3. åº”è¯¥æ˜¾ç¤º "éœ€è¦æ‹¥æœ‰ NFT" é”™è¯¯
4. æ¿€æ´»æŒ‰é’®ç¦ç”¨
```

#### æµ‹è¯• 4: å·²æ¿€æ´»ç”¨æˆ·
```
1. ä½¿ç”¨å·²æ¿€æ´»çš„é’±åŒ…
2. è®¿é—® /activate-membership?level=1
3. åº”è¯¥æ˜¾ç¤º "å·²æ¿€æ´»" ç»¿è‰²æç¤º
4. ä¸æ˜¾ç¤ºæ¿€æ´»æŒ‰é’®
```

---

## ğŸ“ ç”¨æˆ·æŒ‡å¯¼

### å¦‚ä½•ä½¿ç”¨æ‰‹åŠ¨æ¿€æ´»

#### æ­¥éª¤ 1: ç¡®è®¤ NFT æ‰€æœ‰æƒ
1. è®¿é—® [Arbiscan](https://arbiscan.io/)
2. è¾“å…¥ä½ çš„é’±åŒ…åœ°å€
3. åˆ‡æ¢åˆ° "Token" æ ‡ç­¾
4. ç¡®è®¤æ‹¥æœ‰ Level X NFT

#### æ­¥éª¤ 2: è®¿é—®æ¿€æ´»é¡µé¢
1. è®¿é—® `https://your-app.com/activate-membership?level=1`
2. è¿æ¥é’±åŒ…

#### æ­¥éª¤ 3: æ£€æŸ¥çŠ¶æ€
æŸ¥çœ‹çŠ¶æ€æ¸…å•ï¼š
- âœ… Own Level X NFT
- âœ… User Registration
- âŒ Membership Activated

#### æ­¥éª¤ 4: æ¿€æ´»ä¼šå‘˜
1. ç‚¹å‡» "Activate Level X Membership" æŒ‰é’®
2. ç­‰å¾…é“¾ä¸ŠéªŒè¯
3. æˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ° Dashboard

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: NFT Not Found

**ç—‡çŠ¶**: ç‚¹å‡»æ¿€æ´»åæ˜¾ç¤º "NFT Not Found"

**å¯èƒ½åŸå› **:
- NFT è´­ä¹°äº¤æ˜“å°šæœªç¡®è®¤
- åŒºå—é“¾æ•°æ®æœªåŒæ­¥

**è§£å†³æ–¹æ¡ˆ**:
1. ç­‰å¾… 1-2 åˆ†é’Ÿ
2. åœ¨ Arbiscan ç¡®è®¤äº¤æ˜“çŠ¶æ€
3. åˆ·æ–°é¡µé¢é‡è¯•

### é—®é¢˜ 2: User Not Registered

**ç—‡çŠ¶**: è‡ªåŠ¨å¼¹å‡ºæ³¨å†Œè¡¨å•

**åŸå› **: ç”¨æˆ·åœ¨ users è¡¨ä¸­æ²¡æœ‰è®°å½•

**è§£å†³æ–¹æ¡ˆ**:
1. å¡«å†™æ³¨å†Œè¡¨å•
2. è¾“å…¥ç”¨æˆ·åã€é‚®ç®±
3. ç¡®è®¤æ¨èäººé’±åŒ…åœ°å€
4. æäº¤æ³¨å†Œ
5. æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨è¿”å›æ¿€æ´»é¡µé¢

### é—®é¢˜ 3: No Referrer

**ç—‡çŠ¶**: æ˜¾ç¤º "Referrer Required"

**åŸå› **: users è¡¨ä¸­æ²¡æœ‰ referrer_wallet å­—æ®µ

**è§£å†³æ–¹æ¡ˆ**:
1. è”ç³»æ”¯æŒå›¢é˜Ÿ
2. æä¾›ä½ çš„é’±åŒ…åœ°å€
3. æ”¯æŒå›¢é˜Ÿæ‰‹åŠ¨æ›´æ–° referrer

### é—®é¢˜ 4: Already Activated

**ç—‡çŠ¶**: æ˜¾ç¤ºç»¿è‰² "Already Activated"

**åŸå› **: ä¼šå‘˜å·²ç»æ¿€æ´»æˆåŠŸ

**è§£å†³æ–¹æ¡ˆ**:
- è¿™ä¸æ˜¯é”™è¯¯ï¼ä½ çš„ä¼šå‘˜å·²ç»æ¿€æ´»
- ç›´æ¥è®¿é—® `/dashboard`

---

## ğŸ’¡ ä¼˜åŠ¿

### ä¸ PayEmbed è‡ªåŠ¨æ¿€æ´»å¯¹æ¯”

| ç‰¹æ€§ | è‡ªåŠ¨æ¿€æ´» | æ‰‹åŠ¨æ¿€æ´» |
|------|---------|---------|
| **è§¦å‘æ—¶æœº** | è´­ä¹°åç«‹å³ | ç”¨æˆ·ä¸»åŠ¨è§¦å‘ |
| **å¤±è´¥å¤„ç†** | å¯èƒ½ä¸¢å¤± | éšæ—¶å¯é‡è¯• |
| **çŠ¶æ€å¯è§æ€§** | æ—  | å®Œæ•´æ˜¾ç¤º |
| **ç”¨æˆ·ä½“éªŒ** | æœ€ä½³ï¼ˆæˆåŠŸæ—¶ï¼‰ | æ›´å¯é  |
| **é”™è¯¯æ¢å¤** | å›°éš¾ | ç®€å• |

### å…³é”®ä¼˜åŠ¿

1. **å¯é æ€§** âœ…
   - éšæ—¶å¯é‡è¯•
   - ä¸ä¾èµ– PayEmbed å›è°ƒ

2. **é€æ˜æ€§** ğŸ‘ï¸
   - æ¸…æ™°æ˜¾ç¤ºæ¯ä¸ªæ£€æŸ¥é¡¹
   - ç”¨æˆ·çŸ¥é“å“ªä¸€æ­¥å‡ºäº†é—®é¢˜

3. **çµæ´»æ€§** ğŸ”„
   - æ”¯æŒä»»ä½•ç­‰çº§ï¼ˆ1-19ï¼‰
   - å¤„ç†å„ç§è¾¹ç•Œæƒ…å†µ

4. **ç”¨æˆ·å‹å¥½** ğŸ˜Š
   - ä¸€é”®æ¿€æ´»
   - è¯¦ç»†çš„é”™è¯¯æç¤º
   - å®Œæ•´çš„ FAQ

---

## ğŸ”® æœªæ¥æ”¹è¿›

### å¯é€‰å¢å¼ºåŠŸèƒ½

1. **è‡ªåŠ¨é‡å®šå‘**
   - PayEmbed å¤±è´¥åè‡ªåŠ¨è·³è½¬åˆ°æ¿€æ´»é¡µé¢

2. **æ‰¹é‡æ¿€æ´»**
   - æ”¯æŒä¸€æ¬¡æ¿€æ´»å¤šä¸ªç­‰çº§

3. **æ¿€æ´»å†å²**
   - æ˜¾ç¤ºæ¿€æ´»æ—¶é—´å’Œäº¤æ˜“è®°å½•

4. **é€šçŸ¥æé†’**
   - è´­ä¹°æˆåŠŸä½†æœªæ¿€æ´»æ—¶å‘é€é€šçŸ¥

5. **è¿›åº¦æ¡**
   - æ˜¾ç¤ºæ¿€æ´»è¿‡ç¨‹çš„è¯¦ç»†æ­¥éª¤

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [PAYEMBED_ACTIVATION_FLOW.md](./PAYEMBED_ACTIVATION_FLOW.md) - Edge Function æµç¨‹
- [PAYEMBED_TEST_RESULTS.md](./PAYEMBED_TEST_RESULTS.md) - æµ‹è¯•ç»“æœ
- [PAYEMBED_DEBUGGING_GUIDE.md](./PAYEMBED_DEBUGGING_GUIDE.md) - è°ƒè¯•æŒ‡å—
- [WelcomeLevel1ClaimButton.tsx](./src/components/membership/_archive/WelcomeLevel1ClaimButton.tsx) - å‚è€ƒå®ç°

---

## âœ… æ€»ç»“

### æ ¸å¿ƒæˆæœ

1. âœ… **åˆ›å»ºäº† ManualActivationButton ç»„ä»¶**
   - å®æ—¶çŠ¶æ€æ£€æŸ¥
   - æ³¨å†Œè¡¨å•é›†æˆ
   - ä¸€é”®æ¿€æ´»åŠŸèƒ½

2. âœ… **åˆ›å»ºäº† ActivateMembership é¡µé¢**
   - å®Œæ•´çš„ç”¨æˆ·ç•Œé¢
   - è¯¦ç»†çš„ FAQ
   - æ•…éšœæ’æŸ¥æŒ‡å—

3. âœ… **æ·»åŠ äº†è·¯ç”±é…ç½®**
   - `/activate-membership?level=X`

4. âœ… **è§£å†³äº†æ ¸å¿ƒé—®é¢˜**
   - ç”¨æˆ·å¯ä»¥æ‰‹åŠ¨è§¦å‘æ¿€æ´»
   - ä¸å†ä¾èµ– PayEmbed å›è°ƒ
   - æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯

### ç”¨æˆ·ä»·å€¼

- **å¯é æ€§**: å³ä½¿è‡ªåŠ¨æ¿€æ´»å¤±è´¥ï¼Œç”¨æˆ·ä¹Ÿèƒ½æ‰‹åŠ¨å®Œæˆ
- **é€æ˜æ€§**: æ¸…æ¥šçŸ¥é“æ¯ä¸€æ­¥çš„çŠ¶æ€
- **ç®€å•æ€§**: ä¸€é”®æ¿€æ´»ï¼Œæ— éœ€æŠ€æœ¯çŸ¥è¯†
- **çµæ´»æ€§**: æ”¯æŒå„ç§å¼‚å¸¸æƒ…å†µ

### æŠ€æœ¯ä»·å€¼

- **å¤ç”¨ç°æœ‰ API**: ä½¿ç”¨ `payembed-activation`
- **çŠ¶æ€ç®¡ç†**: æ¸…æ™°çš„çŠ¶æ€æ£€æŸ¥é€»è¾‘
- **é”™è¯¯å¤„ç†**: é’ˆå¯¹æ€§çš„é”™è¯¯æç¤º
- **å¯ç»´æŠ¤æ€§**: ç»„ä»¶åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•

---

## ğŸ”„ Genesis Matrix Rebuild (2025-10-29)

### é‡å¤§ç³»ç»Ÿæ›´æ–°

**é—®é¢˜**: ç”¨æˆ·å‘ç°çŸ©é˜µç»“æ„ä¸ç¬¦åˆé¢„æœŸ - æ¯ä¸ªçˆ¶èŠ‚ç‚¹åªæœ‰ 1 ä¸ªå­èŠ‚ç‚¹ï¼Œå…¨éƒ¨æ ‡è®°ä¸º 'L' ä½ç½®

**æ ¹æœ¬åŸå› **: ç³»ç»Ÿä½¿ç”¨ **Generation-Based Placement**
- æ¯ä¸ªæˆå‘˜åˆ†æ•£åœ¨ 19 ä¸ªä¸åŒçš„ä¸Šçº¿çŸ©é˜µä¸­
- åœ¨æ¯ä¸ªçŸ©é˜µä¸­ï¼Œæ¯ä¸ªçˆ¶èŠ‚ç‚¹é€šå¸¸åªæœ‰ 1 ä¸ªå­èŠ‚ç‚¹
- Layer 2-19 æ˜¾ç¤º 100% 'L' ä½ç½®ï¼Œ0% 'M' å’Œ 'R'

**è§£å†³æ–¹æ¡ˆ**: è½¬æ¢ä¸º **Single Matrix Placement**
- æ‰€æœ‰æˆå‘˜é›†ä¸­åœ¨ä¸€ä¸ªçŸ©é˜µä¸­
- ä½¿ç”¨ BFS + LMR ç®—æ³•å¡«å……
- æ¯ä¸ªçˆ¶èŠ‚ç‚¹å¯ä»¥æœ‰æœ€å¤š 3 ä¸ªå­èŠ‚ç‚¹ (L/M/R)

### å®æ–½ç»“æœ

**æ‰§è¡Œè„šæœ¬**: `supabase/migrations/20251029000004_rebuild_genesis_as_single_matrix.sql`

**é‡å»ºæ•°æ®**:
- å¤‡ä»½: 57 æ¡æ—§ Genesis è®°å½•
- åˆ é™¤: 57 æ¡æ—§è®°å½•
- é‡å»º: 4,076 æ¡æ–°è®°å½•
- å±‚çº§: 8 å±‚å®Œæˆ (Layer 1-7 å®Œæ•´, Layer 8 éƒ¨åˆ†)

**æ•°æ®éªŒè¯**:
```
Layer 1:     3 members (L:1, M:1, R:1)     - 33/33/33% âœ…
Layer 2:     9 members (L:3, M:3, R:3)     - 33/33/33% âœ…
Layer 3:    27 members (L:9, M:9, R:9)     - 33/33/33% âœ…
Layer 4:    81 members (L:27, M:27, R:27) - 33/33/33% âœ…
Layer 5:   243 members (L:81, M:81, R:81) - 33/33/33% âœ…
Layer 6:   729 members                     - 33/33/33% âœ…
Layer 7: 2,187 members                     - 33/33/33% âœ…
Layer 8:   797 members (éƒ¨åˆ†å¡«å……)          - 33/33/33% âœ…
```

**å…³é”®æ”¹è¿›**:
- âœ… æ¯ä¸ªçˆ¶èŠ‚ç‚¹ç°åœ¨æœ‰ 3 ä¸ªå­èŠ‚ç‚¹ (L, M, R)
- âœ… æ‰€æœ‰å±‚çº§å®Œç¾ 33/33/33% L/M/R åˆ†å¸ƒ
- âœ… ç¬¦åˆç”¨æˆ·å¯¹ä¼ ç»ŸçŸ©é˜µç³»ç»Ÿçš„é¢„æœŸ
- âœ… æ ‘å½¢ç»“æ„å®Œæ•´æ¸…æ™°

**éªŒè¯é¡µé¢**: `/verify-genesis-rebuild.html`

**ç›¸å…³æ–‡æ¡£**:
- `GENESIS_MATRIX_REBUILD_SUMMARY.md` - å®Œæ•´é‡å»ºæ€»ç»“
- `MATRIX_PLACEMENT_ISSUE_ANALYSIS.md` - é—®é¢˜åˆ†æ
- `MATRIX_TREE_FRAMEWORK.md` - æ ‘æ¡†æ¶æ–‡æ¡£

**é‡è¦è¯´æ˜**:
âš ï¸ åªå½±å“ Genesis çŸ©é˜µ (0x479ABda6...)
âš ï¸ å…¶ä»–æˆå‘˜çš„ä¸ªäººçŸ©é˜µä»ä½¿ç”¨ Generation-Based ç³»ç»Ÿ

---

**åˆ›å»ºæ—¥æœŸ**: 2025-10-14
**æœ€åæ›´æ–°**: 2025-10-29 (Genesis Matrix Rebuild)
**ä½œè€…**: Claude Code
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶éƒ¨ç½²
